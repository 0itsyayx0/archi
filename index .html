<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Documentos</title>
</head>
<body>
  <h1>Registrar Documento</h1>
  <form id="formulario">
    <input type="text" id="id_documento" placeholder="ID del documento" required><br>
    <input type="number" id="num_paginas" placeholder="Número de páginas" required><br>
    <input type="text" id="id_caja" placeholder="ID de la caja" required><br>
    <input type="number" id="num_caja" placeholder="Número de caja" required><br>
    <button type="submit">Registrar</button>
  </form>

  <h2>Documentos Registrados</h2>
  <ul id="listaDocumentos"></ul>

  <script>
    document.getElementById('formulario').addEventListener('submit', function(e) {
      e.preventDefault();

      const datos = {
        id_documento: document.getElementById('id_documento').value,
        num_paginas: parseInt(document.getElementById('num_paginas').value),
        id_caja: document.getElementById('id_caja').value,
        num_caja: parseInt(document.getElementById('num_caja').value)
      };

      fetch('http://localhost:5000/documentos', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(datos)
      })
      .then(res => res.json())
      .then(data => {
        alert('Documento registrado');
        cargarDocumentos();
      })
      .catch(err => alert('Error al registrar documento'));
    });

    function cargarDocumentos() {
      fetch('http://localhost:5000/documentos')
        .then(res => res.json())
        .then(data => {
          const lista = document.getElementById('listaDocumentos');
          lista.innerHTML = '';
          data.forEach(doc => {
            const item = document.createElement('li');
            item.textContent = `ID: ${doc.id_documento}, Páginas: ${doc.num_paginas}, Caja: ${doc.num_caja} (${doc.id_caja})`;
            lista.appendChild(item);
          });
        });
    }

    // Cargar al iniciar
    cargarDocumentos();
  </script>
</body>
</html>



